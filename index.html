
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuppleMind AI - Guía de Suplementación</title>
    
    <!-- Tailwind para Estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Iconos y Fuentes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Compilador Babel (Permite correr TSX en el navegador) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Scrollbar estética */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>

    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom": "https://esm.sh/react-dom@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "@google/genai": "https://esm.sh/@google/genai@1.34.0",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root">
        <!-- Loader inicial mientras Babel compila -->
        <div class="min-h-screen flex flex-col items-center justify-center bg-white">
            <div class="w-16 h-16 border-4 border-emerald-100 border-t-emerald-600 rounded-full animate-spin mb-4"></div>
            <p class="text-slate-400 font-bold animate-pulse uppercase tracking-widest text-xs">Iniciando Laboratorio SuppleMind...</p>
        </div>
    </div>

    <!-- TODO EL CÓDIGO DE LA APP UNIFICADO -->
    <script type="text/babel" data-type="module" data-presets="react,typescript">
        import React, { useState, useMemo, useEffect } from 'react';
        import ReactDOM from 'react-dom/client';
        import { GoogleGenAI, Type } from "@google/genai";

        // --- TIPOS Y CONSTANTES ---
        const CategoryId = {
            REJUVENATION: 'rejuvenecimiento',
            HORMONAL_MEN: 'hormonales-hombres',
            HORMONAL_WOMEN: 'hormonales-mujeres',
            ANTIOXIDANTS: 'antioxidantes',
            NOOTROPICS: 'nootropicos',
            PHYSICAL_PERFORMANCE: 'desempeno-fisico',
            IMMUNITY: 'inmunidad',
            METABOLISM: 'metabolismo'
        };

        const CATEGORIES = [
            { id: CategoryId.REJUVENATION, name: 'Rejuvenecimiento', icon: 'fa-seedling', color: 'bg-emerald-100 text-emerald-700', subcategories: ['Longevidad', 'NAD+', 'Telómeros'] },
            { id: CategoryId.HORMONAL_MEN, name: 'Hormonales Hombres', icon: 'fa-mars', color: 'bg-blue-100 text-blue-700', subcategories: ['Testosterona', 'Angiogénesis', 'Erección'] },
            { id: CategoryId.HORMONAL_WOMEN, name: 'Hormonales Mujeres', icon: 'fa-venus', color: 'bg-pink-100 text-pink-700', subcategories: ['SOP', 'Menopausia', 'Equilibrio'] },
            { id: CategoryId.ANTIOXIDANTS, name: 'Antioxidantes', icon: 'fa-shield-halved', color: 'bg-orange-100 text-orange-700', subcategories: ['Glutatión', 'Mitocondria'] },
            { id: CategoryId.NOOTROPICS, name: 'Nootrópicos', icon: 'fa-brain', color: 'bg-indigo-100 text-indigo-700', subcategories: ['Enfoque', 'Ánimo', 'Memoria'] },
            { id: CategoryId.PHYSICAL_PERFORMANCE, name: 'Desempeño', icon: 'fa-dumbbell', color: 'bg-red-100 text-red-700', subcategories: ['Fuerza', 'Vasodilatación'] },
            { id: CategoryId.IMMUNITY, name: 'Inmunidad', icon: 'fa-virus-slash', color: 'bg-teal-100 text-teal-700', subcategories: ['Antiviral', 'Defensas'] },
            { id: CategoryId.METABOLISM, name: 'Metabolismo', icon: 'fa-bolt', color: 'bg-amber-100 text-amber-700', subcategories: ['Insulina', 'Quema Grasa'] }
        ];

        const INITIAL_SUPPLEMENTS = [
            {
                id: 'bpc-157-oral',
                name: 'BPC-157 (Arginato)',
                description: 'Péptido gástrico que promueve la angiogénesis nerviosa y reparación vascular profunda.',
                category: CategoryId.HORMONAL_MEN,
                goals: ['Angiogénesis', 'Regeneración', 'Erección', 'Salud Vascular'],
                positiveEffects: ['Formación de nuevos vasos sanguíneos', 'Reparación de tejidos', 'Mejora flujo sanguíneo'],
                sideEffects: ['Investigación emergente'],
                minDose: '200mcg',
                idealDose: '500mcg/día',
                timing: 'Con o sin comida',
                source: 'local'
            },
            {
                id: 'icariin-60',
                name: 'Icariina (Horny Goat Weed 60%)',
                description: 'Inhibidor suave de PDE5 natural que potencia el óxido nítrico y la testosterona.',
                category: CategoryId.HORMONAL_MEN,
                goals: ['Libido', 'Erección', 'Testosterona', 'Angiogénesis'],
                positiveEffects: ['Mejora calidad de erección', 'Efecto mimético de testosterona', 'Salud vascular'],
                sideEffects: ['Taquicardia leve'],
                minDose: '250mg',
                idealDose: '500-750mg/día',
                timing: 'Mañana',
                source: 'local'
            },
            {
                id: 'citrulline-pro',
                name: 'L-Citrulina Malato',
                description: 'Precursor de óxido nítrico para vasodilatación máxima y salud eréctil.',
                category: CategoryId.PHYSICAL_PERFORMANCE,
                goals: ['Vasodilatación', 'Erección', 'Resistencia'],
                positiveEffects: ['Dureza eréctil optimizada', 'Mejor flujo sanguíneo', 'Menor fatiga'],
                sideEffects: ['Molestia gástrica'],
                minDose: '3000mg',
                idealDose: '6000-8000mg',
                timing: '45 min antes de actividad',
                source: 'local'
            }
        ];

        // --- GEMINI SERVICE ---
        const getApiKey = () => {
            try { return window.process?.env?.API_KEY || ''; } catch { return ''; }
        };
        const ai = new GoogleGenAI({ apiKey: getApiKey() });

        // --- COMPONENTES ---
        const SupplementCard = ({ supplement }) => {
            const [expanded, setExpanded] = useState(false);
            const [index, setIndex] = useState(0);
            const cat = CATEGORIES.find(c => c.id === supplement.category);
            const effects = supplement.positiveEffects || [];
            const hasMore = effects.length > 2;

            return (
                <div className="bg-white rounded-[2rem] border border-slate-100 shadow-sm hover:shadow-2xl transition-all overflow-hidden flex flex-col h-full border-b-4 hover:border-b-emerald-500 group">
                    <div className="p-8 flex-1">
                        <div className="flex justify-between items-start mb-6">
                            <span className={`px-4 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest ${cat?.color || 'bg-slate-100'}`}>
                                {cat?.name || supplement.category}
                            </span>
                            <i className="fa-solid fa-flask text-slate-100 text-2xl group-hover:text-emerald-100 transition-colors"></i>
                        </div>
                        <h3 className="text-2xl font-black text-slate-900 mb-3 group-hover:text-emerald-700 transition-colors">{supplement.name}</h3>
                        <p className="text-sm text-slate-500 mb-6 leading-relaxed line-clamp-2">{supplement.description}</p>
                        
                        <div className="bg-slate-50 p-5 rounded-3xl border border-slate-100 relative mb-6">
                            <h4 className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">Efectos Clave</h4>
                            <div className="min-h-[80px]">
                                {effects.slice(index, index + 2).map((eff, i) => (
                                    <div key={i} className="flex items-start gap-3 text-xs font-bold text-slate-700 mb-2 animate-fade-in">
                                        <i className="fa-solid fa-check-circle text-emerald-500 mt-0.5"></i> {eff}
                                    </div>
                                ))}
                            </div>
                            {hasMore && (
                                <div className="flex items-center justify-between mt-4 pt-3 border-t border-slate-200">
                                    <div className="flex gap-2">
                                        <button onClick={() => setIndex(Math.max(0, index - 1))} className="w-7 h-7 bg-white rounded-full border text-[10px] hover:bg-emerald-50"><i className="fa-solid fa-arrow-left"></i></button>
                                        <button onClick={() => setIndex(Math.min(effects.length - 2, index + 1))} className="w-7 h-7 bg-white rounded-full border text-[10px] hover:bg-emerald-50"><i className="fa-solid fa-arrow-right"></i></button>
                                    </div>
                                    <span className="text-[9px] font-black text-slate-300 uppercase">{index + 1} / {effects.length - 1}</span>
                                </div>
                            )}
                        </div>

                        {expanded && (
                            <div className="animate-fade-in space-y-4 pt-4 border-t border-slate-100">
                                <div>
                                    <p className="text-[9px] font-black text-rose-400 uppercase mb-2">Precaución</p>
                                    <div className="flex flex-wrap gap-2">
                                        {supplement.sideEffects.map((s, i) => <span key={i} className="text-[10px] bg-rose-50 text-rose-700 px-2 py-1 rounded-lg font-bold">{s}</span>)}
                                    </div>
                                </div>
                                <div className="grid grid-cols-2 gap-3">
                                    <div className="bg-emerald-50 p-3 rounded-2xl border border-emerald-100">
                                        <span className="block text-[8px] font-black text-emerald-600 uppercase">Dosis Ideal</span>
                                        <span className="text-xs font-black">{supplement.idealDose}</span>
                                    </div>
                                    <div className="bg-blue-50 p-3 rounded-2xl border border-blue-100">
                                        <span className="block text-[8px] font-black text-blue-600 uppercase">Timing</span>
                                        <span className="text-xs font-black">{supplement.timing || 'Mañana'}</span>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                    <button onClick={() => setExpanded(!expanded)} className="w-full py-5 bg-slate-50 text-[10px] font-black text-slate-400 uppercase tracking-widest hover:bg-emerald-600 hover:text-white transition-all">
                        {expanded ? 'Contraer' : 'Detalles de Investigación'}
                    </button>
                </div>
            );
        };

        const App = () => {
            const [category, setCategory] = useState(null);
            const [search, setSearch] = useState('');
            const [supps, setSupps] = useState(INITIAL_SUPPLEMENTS);

            const filtered = useMemo(() => {
                return supps.filter(s => {
                    const matchesCat = !category || s.category === category;
                    const matchesSearch = !search || 
                        s.name.toLowerCase().includes(search.toLowerCase()) || 
                        s.goals.some(g => g.toLowerCase().includes(search.toLowerCase()));
                    return matchesCat && matchesSearch;
                });
            }, [category, search, supps]);

            return (
                <div className="min-h-screen pb-32">
                    <header className="bg-white/80 backdrop-blur-md border-b sticky top-0 z-50 p-4">
                        <div className="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
                            <div className="flex items-center gap-3">
                                <div className="w-10 h-10 bg-emerald-600 rounded-xl flex items-center justify-center text-white shadow-lg"><i className="fa-solid fa-microscope text-xl"></i></div>
                                <h1 className="text-xl font-black tracking-tighter">SuppleMind <span className="text-emerald-600">Pro</span></h1>
                            </div>
                            <div className="flex-1 max-w-lg relative">
                                <input 
                                    type="text" 
                                    placeholder="Ej: 'angiogénesis', 'foco', 'testosterona'..."
                                    className="w-full pl-10 pr-4 py-3 bg-slate-100 border-2 border-transparent rounded-2xl text-sm focus:border-emerald-500 focus:bg-white outline-none transition-all"
                                    value={search}
                                    onChange={e => setSearch(e.target.value)}
                                />
                                <i className="fa-solid fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto px-6 py-10">
                        <section className="mb-12">
                            <h2 className="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-6">Categorías de Optimización</h2>
                            <div className="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-3">
                                {CATEGORIES.map(cat => (
                                    <button 
                                        key={cat.id}
                                        onClick={() => setCategory(cat.id === category ? null : cat.id)}
                                        className={`flex flex-col items-center p-5 rounded-[2rem] border-2 transition-all ${category === cat.id ? 'border-emerald-500 bg-white shadow-xl scale-105' : 'border-transparent bg-white shadow-sm'}`}
                                    >
                                        <div className={`w-12 h-12 rounded-2xl flex items-center justify-center mb-3 text-xl ${cat.color}`}><i className={`fa-solid ${cat.icon}`}></i></div>
                                        <span className="text-[9px] font-black uppercase text-center tracking-tighter">{cat.name}</span>
                                    </button>
                                ))}
                            </div>
                        </section>

                        <section>
                            <div className="flex items-center justify-between mb-10">
                                <h2 className="text-3xl font-black text-slate-900">Directorio Clínico</h2>
                                <span className="text-xs font-bold text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full">{filtered.length} Resultados</span>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                {filtered.map(s => <SupplementCard key={s.id} supplement={s} />)}
                            </div>
                        </section>
                    </main>

                    <footer className="fixed bottom-0 w-full bg-slate-900 text-white p-5 border-t border-white/5 backdrop-blur-md">
                        <div className="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
                            <p className="text-[9px] font-bold text-slate-500 uppercase tracking-widest">⚠️ Uso educativo. No sustituye diagnóstico médico profesional.</p>
                            <div className="flex items-center gap-3">
                                <div className="h-2 w-2 bg-emerald-500 rounded-full animate-pulse"></div>
                                <span className="text-[9px] font-black text-emerald-400 uppercase">Sistema Babel v7.2 Active</span>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
